<mat-toolbar #toolbar class="mat-elevation-z8 font-weight-bold fixed-top" color="primary">
  <mat-toolbar-row>
    <a class="navbar-brand mr-auto">
      <img src="assets/YoSense2.svg" width="44" height="33" class="d-inline-block align-top" alt="">
      <span class="fix-brand-title" (click)="redirectPage()">遊程氏：YoSense</span>
    </a>
    <div *ngIf="(stepDisplayState$ | async).diveDisplayState === 'OPEN'" class="btn-group" role="group">
      <button *ngIf="(stepDisplayState$ | async).diveDisplayState === 'OPEN'" type="button" routerLink="/authoring/edit/dive" routerLinkActive="active" class="btn btn-dark">互動內容</button>
      <button *ngIf="(stepDisplayState$ | async).hierarchyDisplayState === 'OPEN'" type="button" routerLink="/authoring/edit/hierarchy" routerLinkActive="active" class="btn btn-dark">建立資料結構</button>
      <button *ngIf="(stepDisplayState$ | async).blocklyDisplayState === 'OPEN'" type="button" routerLink="/authoring/edit/blockly" routerLinkActive="active" class="btn btn-dark">Blockly積木</button>
      <button *ngIf="(stepDisplayState$ | async).bindingDisplayState === 'OPEN'" type="button" routerLink="/authoring/edit/bind" routerLinkActive="active" class="btn btn-dark">綁定功能</button>
      <button *ngIf="(stepDisplayState$ | async).diagnosisDisplayState === 'OPEN'" type="button" routerLink="/authoring/edit/diagnosis" routerLinkActive="active" class="btn btn-dark">學習診斷</button>
      <button *ngIf="(stepDisplayState$ | async).passDisplayState === 'OPEN'" type="button" routerLink="/authoring/edit/pass" routerLinkActive="active" class="btn btn-dark">過關條件</button>
    </div>
    <form [formGroup]="signInForm" *ngIf="!(isLogin$ | async); else elseTmpl" class="ml-auto d-flex w-40 justify-content-between">
      <input formControlName="mail" class="form-control w-40" type="text" placeholder="帳號">
      <input formControlName="password" class="form-control w-40" type="password" placeholder="密碼">
      <button class="btn btn-success my-2 my-sm-0" type="submit" (click)="onSignIn()">登入</button>
    </form>
  </mat-toolbar-row>

  <ng-template #elseTmpl>
    <span class="ml-auto" (click)="displayMenu()">{{userName}}, 歡迎回來！</span>
  </ng-template>

  <ng-template #menuTmpl>
      <mat-list role="list" class="menuList mr-2 ">
            <mat-list-item routerLink="/"  class="mat-elevation-z6 d-flex justify-content-center" (click)="onSignOut()">登出</mat-list-item>
        </mat-list>
    </ng-template>
